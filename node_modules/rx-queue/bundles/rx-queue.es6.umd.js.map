{"version":3,"file":"rx-queue.es6.umd.js","sources":["../dist/src/version.js","../dist/src/rx-queue.js","../dist/src/delay-queue.js","../dist/src/delay-queue-executor.js","../dist/src/debounce-queue.js","../dist/src/throttle-queue.js"],"sourcesContent":["/**\n * This file was auto generated from scripts/generate-version.sh\n */\nexport const VERSION = '0.8.5';\n//# sourceMappingURL=version.js.map","import { Subject, } from 'rxjs';\nimport { VERSION, } from './config';\n// default set to 500 milliseconds\nconst DEFAULT_PERIOD_TIME = 500;\n// https://codepen.io/maindg/pen/xRwGvL\nexport class RxQueue extends Subject {\n    constructor(period = DEFAULT_PERIOD_TIME) {\n        super();\n        this.period = period;\n        this.itemList = [];\n    }\n    next(item) {\n        if (this.observers.length > 0) {\n            super.next(item);\n        }\n        else {\n            this.itemList.push(item);\n        }\n    }\n    subscribe(nextOrObserver, error, complete) {\n        let subscription; // TypeScript strict require strong typing differenciation\n        if (typeof nextOrObserver === 'function') {\n            subscription = super.subscribe(nextOrObserver, error, complete);\n        }\n        else {\n            subscription = super.subscribe(nextOrObserver);\n        }\n        this.itemList.forEach(item => this.next(item));\n        this.itemList = [];\n        return subscription;\n    }\n    version() {\n        return VERSION;\n    }\n}\nexport default RxQueue;\n//# sourceMappingURL=rx-queue.js.map","import { concat, EMPTY, of, Subject, } from 'rxjs';\nimport { concatMap, delay, } from 'rxjs/operators';\nimport RxQueue from './rx-queue';\n/**\n * DelayQueue passes all the items and add delays between items.\n * T: item type\n */\nexport class DelayQueue extends RxQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.subject = new Subject();\n        this.subscription = this.subject.pipe(concatMap(args => concat(of(args), // emit first item right away\n        EMPTY.pipe(delay(this.period))))).subscribe((item) => super.next(item));\n    }\n    next(item) {\n        this.subject.next(item);\n    }\n    unsubscribe() {\n        this.subscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default DelayQueue;\n//# sourceMappingURL=delay-queue.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport DelayQueue from './delay-queue';\n/**\n * DelayQueueExecutor calls functions one by one with a delay time period between calls.\n */\nexport class DelayQueueExecutor extends DelayQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.delayQueueSubscription = this.subscribe(unit => {\n            try {\n                const ret = unit.fn();\n                return unit.resolve(ret);\n            }\n            catch (e) {\n                return unit.reject(e);\n            }\n        });\n    }\n    execute(fn, name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                const unit = {\n                    fn,\n                    name: name || fn.name,\n                    reject,\n                    resolve,\n                };\n                this.next(unit);\n            });\n        });\n    }\n    unsubscribe() {\n        this.delayQueueSubscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default DelayQueueExecutor;\n//# sourceMappingURL=delay-queue-executor.js.map","import { interval, Subject, } from 'rxjs';\nimport { debounce, } from 'rxjs/operators';\nimport RxQueue from './rx-queue';\n/**\n * DebounceQueue drops a item if there's another one comes in a period of time.\n *\n * T: item type\n */\nexport class DebounceQueue extends RxQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.subject = new Subject();\n        this.subscription = this.subject.pipe(debounce(() => interval(this.period)))\n            .subscribe((item) => super.next(item));\n    }\n    next(item) {\n        this.subject.next(item);\n    }\n    unsubscribe() {\n        this.subscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default DebounceQueue;\n//# sourceMappingURL=debounce-queue.js.map","import { interval, Subject, } from 'rxjs';\nimport { throttle, } from 'rxjs/operators';\nimport RxQueue from './rx-queue';\n/**\n * ThrottleQueue\n *\n * passes one item and then drop all the following items in a period of time.\n *\n * T: item type\n */\nexport class ThrottleQueue extends RxQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.subject = new Subject();\n        this.subscription = this.subject.pipe(throttle(() => interval(this.period))).subscribe((item) => super.next(item));\n    }\n    next(item) {\n        this.subject.next(item);\n    }\n    unsubscribe() {\n        this.subscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default ThrottleQueue;\n//# sourceMappingURL=throttle-queue.js.map"],"names":["Subject","concatMap","concat","of","EMPTY","delay","this","debounce","interval","throttle"],"mappings":"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"}