{"version":3,"file":"event-stream-manager.js","sourceRoot":"","sources":["../../../src/server/event-stream-manager.ts"],"names":[],"mappings":"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"}